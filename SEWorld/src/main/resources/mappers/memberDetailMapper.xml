<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="global.sesoc.seworld.dao.MemberDetailMapper">

	<select id="viewMemberDetail" parameterType="String" resultType="MemberDetail">
		SELECT
		f1.followings followingCount
		,f2.followers followerCount
		,w.wishings wishingCount
		,c.comments commentCount
		,b.reviews reviewCount
		FROM
		(SELECT COUNT(following) followings FROM c6_followship WHERE following = #{memberId}) f1,
		(SELECT COUNT(follower) followers FROM c6_followship WHERE follower = #{memberId}) f2,
		(SELECT COUNT(exhibitionId) wishings FROM c6_wishing WHERE memberId = #{memberId}) w,
		(SELECT COUNT(exhibitionId) comments FROM c6_comment WHERE memberId = #{memberId}) c,
		(SELECT COUNT(boardId) reviews FROM c6_board WHERE memberId = #{memberId} AND category = 'review') b
	</select>

	<select id="myWishings" parameterType="String" resultType="Wishing">
		SELECT
		memberId
		,exhibitionId
		,wished
		,createdDate
		,updatedDate
		FROM c6_wishing
		WHERE memberId = #{memberId}
		ORDER BY createdDate DESC
	</select>

	<select id="myComments" parameterType="String" resultType="Comment">
		SELECT
		memberId
		,exhibitionId
		,rating
		,content
		,createdDate
		,updatedDate
		,likes
		FROM c6_comment
		WHERE memberId = #{memberId}
		ORDER BY createdDate DESC
	</select>

	<select id="myReviews" parameterType="String" resultType="Board">
		SELECT
		boardId
		,memberId
		,category
		,title
		,content
		,createdDate
		,updatedDate
		,exhibitionId
		FROM c6_board
		WHERE memberId = #{memberId}
		ORDER BY createdDate DESC
	</select>

</mapper>